/* --- 4. 刑侦档案风 Detective Archive --- */
:root[data-theme-layout="detective"] {
    --font-heading: 'Courier New', Courier, monospace;
    --border-radius: 2px;
    --border-radius-lg: 4px;
    --border-color: #555;
    --card-bg: #e6dfcc;
    /* Manila folder color */
}

/* Enforce light/print aesthetic */
[data-theme-layout="detective"] body {
    color: #222;
    font-family: 'Courier New', Courier, monospace;
    background-color: #d1c9b4;
    /* Darker desk color */
    background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0, 0, 0, 0.02) 10px, rgba(0, 0, 0, 0.02) 20px);
}

[data-theme-layout="detective"] .sidebar {
    background: #1a1a1a;
    color: #fff;
    border-right: 8px solid #d32f2f;
    /* Heavy red tape */
    box-shadow: 10px 0 20px rgba(0, 0, 0, 0.4);
}

[data-theme-layout="detective"] .nav-links a,
[data-theme-layout="detective"] .sidebar-footer {
    color: #ddd;
    font-family: var(--font-heading);
    text-transform: uppercase;
}

/* Scrapbook Folder Cards */
[data-theme-layout="detective"] .glass-card,
[data-theme-layout="detective"] .module-entry-card {
    background: var(--card-bg);
    color: #222;
    border: 2px solid #a39b85;
    box-shadow: 8px 8px 0px rgba(0, 0, 0, 0.15);
    /* Brutalist flat shadow */
    border-radius: 2px;
    position: relative;
    padding: 2.5rem;
    margin-bottom: 2rem;
}

/* Tape effect for general cards */
[data-theme-layout="detective"] .glass-card::before {
    content: '';
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%) rotate(-2deg);
    width: 100px;
    height: 25px;
    background: rgba(255, 255, 255, 0.4);
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
}

[data-theme-layout="detective"] .character-grid {
    gap: 40px;
    padding: 20px;
}

/* Polaroid Character Cards */
[data-theme-layout="detective"] .char-card {
    background: #fdfdfd;
    padding: 15px 15px 40px 15px;
    border: 1px solid #ccc;
    box-shadow: 5px 10px 15px rgba(0, 0, 0, 0.2);
    border-radius: 2px;
    transform: rotate(calc(var(--random-rot, 1) * -2deg));
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

[data-theme-layout="detective"] .char-card:nth-child(even) {
    transform: rotate(3deg);
}

[data-theme-layout="detective"] .char-card:nth-child(3n) {
    transform: rotate(-1deg);
}

[data-theme-layout="detective"] .char-card:hover {
    transform: scale(1.05) rotate(0deg);
    box-shadow: 10px 20px 25px rgba(0, 0, 0, 0.3);
    z-index: 10;
}

[data-theme-layout="detective"] .char-card-img {
    filter: grayscale(80%) contrast(120%);
    border: 1px solid #eee;
    height: 220px;
    margin-bottom: 15px;
    border-radius: 0;
}

[data-theme-layout="detective"] .char-card-info h3 {
    text-align: center;
    font-weight: bold;
    color: #111;
    font-size: 1.2rem;
    text-transform: uppercase;
}

/* Red Classified stamp effect on titles */
[data-theme-layout="detective"] .section-title {
    background: #111;
    color: #fff;
    display: inline-block;
    padding: 8px 20px;
    border-left: none;
    text-transform: uppercase;
    letter-spacing: 3px;
    font-size: 1.8rem;
    box-shadow: 4px 4px 0 #d32f2f;
    margin-bottom: 2rem;
}

[data-theme-layout="detective"] .tag-badge {
    color: #d32f2f !important;
    border: 3px solid #d32f2f !important;
    background: transparent !important;
    text-transform: uppercase;
    font-weight: 900;
    transform: rotate(-3deg);
    border-radius: 6px;
    padding: 2px 10px;
    font-size: 0.8rem;
    letter-spacing: 1px;
}